# 🔍 OCR 처리 성능 비교 & 처리 전략 결정

# 🛑 문제 (Problem)
- 채용공고 수집 과정에서 **이미지 형태의 공고 다수 존재**
  - 텍스트 원본 미제공
  - 이미지 기반 정보만 제공되는 케이스 빈번
- 채용공고 검색엔진 특성상 **OCR 선택이 불가피**
- 한글 중심 채용공고 → OCR 정확도 매우 중요
- OCR 엔진 선택에 따라
  - 처리 시간
  - CPU 사용량
  - 전체 파이프라인 안정성
  에 큰 영향 발생

### 기존 환경 제약
- 데몬 서비스 → `collector + consumer + ocr + warehouse` 상시 구
- 애플리케이션 → `hadoop + elasticsearch` 상시 구동
- OCR이 CPU를 과도하게 사용하면 **전체 서비스 병목 발생**

---
<br>

## ⚙ 트러블슈팅 방법 (Solution)

### 1️⃣ OCR 엔진 비교 테스트
#### ✔ EasyOCR
```bash
python3 easy_ocr.py
```
- **한글 인식률 우수**
- 문장 구조 유지 양호
- **단점: CPU 사용량 높음**
- 출력 결과 ⤵
```text
2026년 TA3L= 1 welcowe! 경력사원 모집합니다!
사람이 중심이 되는 테이블에이아이 저희와 함께 꿈들 향해 나아갈 인재름 찾습니다!
모집분야 지원절차 데이터엔지니어 서류접수 담당업무 2026년 01월 21일~2026년 02월 28일
데이터 웨어하우스 아키택처 설계 및 구축 접수방법
ETLIELT 파이프라인 개발 및 최적화 데이터 모델림 및 마트 구성 사람인 온라인 지원 품질 관리 및 모니터림
제출서류 자격오건 이력서, 경력기술서(필수) 학력 대출(2년)이상 자기소개서(선택) 경력 10년 이상
[필수 기재사항] 필수 DW 구축 운영 경험 희망연봉,
희망 계약형태(계약직/ 프리랜서) AWS 데이터 플렉품 경험 (Glue Athena Redshift, EMR 53. Iceberg)
채용절차 계약험태 계약직 (6개월, 정규직 전환 가능) 개인사업자 (프리랜서)
서류심사 면접 합격자 발표
근무지 [1+H2*I] 5호선 개화산역 2OOm 이내
....
```
---
#### ✔ Tesseract OCR
```bash
python3 tess.py
```
- **리소스 사용 적음**
- **한글 오인식 다수 발생**
- 출력 결과 ⤵
```text
20282 TABLE Al ^ nine ana ~ 데이터엔지니어 2026년 01월 21일~2026년 02월 28일
데이터 웨어하우스 아키텍처 설계 및 구축 품질 관리 및 모니터링 이력서, 경력기술서(필수)
학력 : 대졸(2년이상 자기소개서떤텍) 경력 : 10년 이상 [필수 기재사항] 필수 : 0\
구축 운영 경험 희망연봉, 희망 계약형태(계약직/프리랜서) AWS GIOIE B24 경험
(Glue, Athena, Redshift, EMR, $3. loeberg) 계약직 (6개월, 정규직 전환 가능)
개인사업자 (프리랜서) 5호선 개화산역 2000 미내 
(대기업 제1협력사 상주 근무, 상세 주소는 합격자메게 별도 안내)
```
#### ✔ 채용공고 특성상 정확도가 최우선 → `EasyOCR` 선택

---

### 2️⃣ EasyOCR 멀티프로세스 성능 테스트
#### ✔ 테스트 환경
- CPU: 7 Core
- EasyOCR 멀티프로세스 처리
#### ✔ 결과
- 2건 처리: 약 4.5초
- Load Average: `6.09`
- OCR 프로세스가 CPU 리소스 대부분 점유..
#### ✔ Scale-Up 방식은 전체 시스템 부하 유발..
---

### 3️⃣ 처리 전략 전환
#### ❌ Scale-Up ( 멀티프로세스 )
- 단일 서버 OCR 처리량 증가
- Load Average 급상승
- Hadoop / ES / Consumer 등.. 영향 발생
#### ✔ Scale-Out 전략 채택
- OCR은 단건 처리
- Kafka 기반 메시지 분산
- OCR 컨테이너 수평 확장
- OCR을 독립 서비스로 분리
#### ✔ 최종 성능
- 단건 OCR 처리 시간: 약 3초
- Max Load Average: `약 4`
- 전체 파이프라인 안정성 확보

---
<br><br>

# 📊 결과 (Result)

| 지표 | Tesseract | EasyOCR (멀티프로세스) | EasyOCR (단건 + Scale-Out) |
|------|-----------|-----------------------|---------------------------|
| **한글 인식률** | 낮음 | 매우 높음 | 매우 높음 |
| **CPU 사용량** | 낮음 | 매우 높음 | 중간 |
| **시스템 안정성** | 매우 높음 | 낮음 | 보통 |
| **Load Average** | 매우 낮음 | 6 이상 | 4 이하 |
| **최종 선택** | ❌ | ❌ | ⭕ |

---

## ⚡ 장점
- 이미지 기반 채용공고 전체 대응 가능
- EasyOCR 기반 **높은 한글 인식 정확도**
- OCR 단건 처리로 전체 시스템 안정성 확보
- Kafka 기반 **Scale-Out 확장 구조**
- Hadoop / ES / Consumer와 리소스 충돌 최소화

---

## ⚡ 단점 / 고려 사항
- 단일 OCR 처리 속도는 멀티프로세스 대비 느림
- Scale-Out 전제 → 서버 / 컨테이너 수 증가 필요
- CPU 기반 OCR → 추후 GPU OCR 분리 아키텍처 고려 필요 ( 리소스 확장 시 )

---
<br><br>

# 🏆 성과 요약

| 지표 | 기존 | 개선 |
|------|------|------|
| **OCR 적용 범위** | 제한적 | 이미지 공고 전체 대응 |
| **인식 정확도** | 낮음 | 매우 높음 |
| **시스템 부하** | 불안정 | 안정 |
| **확장 방식** | Scale-Up | **Scale-Out** |

---

## 📌 결론
- 이미지 형태 채용공고 다수 존재 → **OCR 선택은 불가피**
- 채용공고 도메인 특성상 **정확도가 최우선**
- Tesseract 대비 EasyOCR의 한글 인식률 우수
- Scale-Up 방식은 전체 시스템 병목 유발
- **단건 처리 + Scale-Out 구조가 최적의 선택**

---

## ✅ 최종 선택
- **EasyOCR (CPU 기반, 단건 처리)**
- **Kafka 기반 Scale-Out 구조**
- **OCR 전용 컨테이너 분리 운영**
---
